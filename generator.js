var json = {};
json['name'] = 'default';
json['questions'] = {
    'question1': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question2': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question3': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question4': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question5': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question6': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question7': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question8': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question9': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question10': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question11': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question12': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question13': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question14': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question15': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question16': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question17': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question18': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question19': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question20': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question21': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question22': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question23': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question24': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    },
    'question25': {
        'question': '',
        'a1': {'text': '', 'true': false},
        'a2': {'text': '', 'true': false},
        'a3': {'text': '', 'true': false},
        'a4': {'text': '', 'true': false}
    }
};

var previous;

$(document).ready(function () {
    $('#level_select').on('focus', function () {
        previous = this.value;
    }).change(function () {
        save_level(previous);
        load_level(this.value);
        previous = this.value;
    });

    $('button').click(function () {
        var packName = $('#packName').val();
        if (packName.length < 1) return false;
        else {
            json['name'] = packName;
            var dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(json));
            $('#download').attr('href', dataStr);
            $('#download').attr('download', $('#packName').val() + '.json');
            document.getElementById('download').click();
        }

    });
});

function load_level(l) {
    l = 'question' + l.slice(1);
    node = json['questions'][l];
    $('#question').val(node['question']);
    $('#a1').val(node['a1']['text']);
    $('#a2').val(node['a2']['text']);
    $('#a3').val(node['a3']['text']);
    $('#a4').val(node['a4']['text']);

    if (node['a1']['true']) $('#ra1').prop('checked', true);
    else $('#ra1').prop('checked', false);
    if (node['a2']['true']) $('#ra2').prop('checked', true);
    else $('#ra2').prop('checked', false);
    if (node['a3']['true']) $('#ra3').prop('checked', true);
    else $('#ra3').prop('checked', false);
    if (node['a4']['true']) $('#ra4').prop('checked', true);
    else $('#ra4').prop('checked', false);
}

function save_level(l) {
    l = 'question' + l.slice(1);
    node = json['questions'][l];
    node['question'] = $('#question').val();
    node['a1']['text'] = $('#a1').val();
    node['a2']['text'] = $('#a2').val();
    node['a3']['text'] = $('#a3').val();
    node['a4']['text'] = $('#a4').val();
    node['a1']['true'] = !!$('#ra1').is(':checked');
    node['a2']['true'] = !!$('#ra2').is(':checked');
    node['a3']['true'] = !!$('#ra3').is(':checked');
    node['a4']['true'] = !!$('#ra4').is(':checked');
}